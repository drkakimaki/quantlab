# Holdout-aware tightening sweep around NoChop, with improved ema_sep fixed.
# Goal: keep most of the 2020-2022 gain without catastrophic 2026 drawdowns.
#
# NOTE: quantlab.rnd optimizes TRAIN only (2026 excluded via score_exclude).
# We'll manually inspect 2026 after selecting top candidates.

kind: grid
mode: three_block
base: configs/trend_based/current.yaml

dd_cap_percent: 20
initial_capital: 1000

top_k: 30

grid:
  # Keep the improved ema_sep we found.
  pipeline.0.params.ema_fast: [50]
  pipeline.0.params.ema_slow: [300]
  pipeline.0.params.atr_n: [20]
  pipeline.0.params.sep_k: [0.06, 0.07]

  # Tighten NoChop around the risky best.
  pipeline.1.params.min_closes: [20, 22, 24, 26, 28]
  pipeline.1.params.entry_held: [false, true]
